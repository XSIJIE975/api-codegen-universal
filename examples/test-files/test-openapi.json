{
  "openapi": "3.0.0",
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "注册成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/RegisterResponseVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "邮箱或用户名已存在",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "用户注册",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "登录成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AuthResponseVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "用户名或密码错误",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "用户登录",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "operationId": "AuthController_refreshToken",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token 刷新成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AuthResponseVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Refresh Token 无效或已过期",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "刷新 Token",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "退出成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "退出登录",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/me": {
      "post": {
        "operationId": "AuthController_getCurrentUser",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AuthMeResponseVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取当前用户信息",
        "tags": ["Auth"]
      }
    },
    "/api/v1/users": {
      "get": {
        "operationId": "UsersController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "minimum": 1,
              "default": 10,
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "keyword",
            "required": false,
            "in": "query",
            "description": "搜索关键词（用户名、邮箱、姓名）",
            "schema": {
              "example": "john",
              "type": "string"
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "是否激活",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "isVerified",
            "required": false,
            "in": "query",
            "description": "是否验证",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "role",
            "required": false,
            "in": "query",
            "description": "角色代码",
            "schema": {
              "example": "admin",
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "排序字段",
            "schema": {
              "default": "createdAt",
              "example": "createdAt",
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "lastLoginAt",
                "email",
                "username"
              ]
            }
          },
          {
            "name": "order",
            "required": false,
            "in": "query",
            "description": "排序方向",
            "schema": {
              "enum": ["asc", "desc"],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取用户列表",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUsersDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取用户列表（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/statistics": {
      "get": {
        "operationId": "UsersController_getStatistics",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功获取统计数据",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserStatisticsDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取用户统计数据（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "operationId": "UsersController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取用户信息",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取用户详情（管理员）",
        "tags": ["Users"]
      },
      "patch": {
        "operationId": "UsersController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新用户信息",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在"
          },
          "409": {
            "description": "邮箱/用户名/手机号已被使用"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新用户信息（管理员）",
        "tags": ["Users"]
      },
      "delete": {
        "operationId": "UsersController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "成功删除用户"
          },
          "404": {
            "description": "用户不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "删除用户（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/{id}/status": {
      "patch": {
        "operationId": "UsersController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新用户状态",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "用户邮箱已验证"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新用户状态（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/{id}/verify": {
      "patch": {
        "operationId": "UsersController_verifyUser",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功验证用户邮箱",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在"
          },
          "409": {
            "description": "用户邮箱已验证"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "验证用户邮箱（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/{id}/reset-password": {
      "post": {
        "operationId": "UsersController_resetPassword",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功重置密码"
          },
          "404": {
            "description": "用户不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "重置用户密码（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/{id}/roles": {
      "post": {
        "operationId": "UsersController_assignRoles",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignRolesDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功分配角色",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "用户未拥有该角色"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "分配角色给用户（管理员）",
        "tags": ["Users"]
      },
      "get": {
        "operationId": "UsersController_getUserRoles",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取角色列表"
          },
          "404": {
            "description": "用户不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取用户的角色列表（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/{id}/roles/{roleId}": {
      "delete": {
        "operationId": "UsersController_removeRole",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "用户 ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "roleId",
            "required": true,
            "in": "path",
            "description": "角色 ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "成功移除角色"
          },
          "404": {
            "description": "角色不存在或用户未拥有该角色"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "移除用户的角色（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/batch-delete": {
      "post": {
        "operationId": "UsersController_batchDelete",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchOperationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功删除用户"
          },
          "404": {
            "description": "没有找到可删除的用户"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "批量删除用户（管理员）",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/profile/me": {
      "get": {
        "operationId": "UsersController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功获取个人资料",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取当前用户资料",
        "tags": ["Users"]
      },
      "patch": {
        "operationId": "UsersController_updateProfile",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新个人资料",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "用户名/手机号已被使用"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新个人资料",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/profile/change-password": {
      "post": {
        "operationId": "UsersController_changePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "密码修改成功"
          },
          "409": {
            "description": "旧密码不正确或新密码与旧密码相同"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "修改密码",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/profile/sessions": {
      "get": {
        "operationId": "UsersController_getSessions",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功获取会话列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserSessionDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取当前用户的会话列表",
        "tags": ["Users"]
      }
    },
    "/api/v1/users/profile/logout-other-sessions": {
      "post": {
        "operationId": "UsersController_logoutOtherSessions",
        "parameters": [],
        "responses": {
          "200": {
            "description": "成功注销其他会话"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "注销其他会话",
        "tags": ["Users"]
      }
    },
    "/api/v1/roles": {
      "post": {
        "description": "创建新的角色，需要管理员权限和角色创建权限",
        "operationId": "RolesController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "角色创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败或角色已存在"
          },
          "403": {
            "description": "权限不足"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "创建角色",
        "tags": ["Roles"]
      },
      "get": {
        "description": "获取所有角色的基础列表，需要管理员权限和角色读取权限",
        "operationId": "RolesController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleResponseDto"
                  }
                }
              }
            }
          },
          "403": {
            "description": "权限不足"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取角色列表",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/paginated": {
      "get": {
        "description": "支持关键词搜索、状态筛选和排序的分页查询",
        "operationId": "RolesController_findAllPaginated",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码（从1开始）",
            "schema": {
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "default": 10,
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "keyword",
            "required": false,
            "in": "query",
            "description": "搜索关键词（角色名称、代码或描述）",
            "schema": {
              "example": "管理员",
              "type": "string"
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "角色状态筛选",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "排序字段",
            "schema": {
              "enum": ["createdAt", "updatedAt", "name", "code"],
              "type": "string"
            }
          },
          {
            "name": "order",
            "required": false,
            "in": "query",
            "description": "排序方向",
            "schema": {
              "enum": ["asc", "desc"],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedRolesDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "分页查询角色",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/{id}": {
      "get": {
        "description": "根据ID获取单个角色的详细信息",
        "operationId": "RolesController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "角色ID",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "includePermissions",
            "required": false,
            "in": "query",
            "description": "是否包含权限信息",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "角色不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取角色详情",
        "tags": ["Roles"]
      },
      "patch": {
        "description": "更新角色的基本信息（名称、代码、描述）",
        "operationId": "RolesController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "角色ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRoleDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败或角色名称/代码已存在"
          },
          "404": {
            "description": "角色不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新角色",
        "tags": ["Roles"]
      },
      "delete": {
        "description": "删除指定的角色，如果角色正在被用户使用则无法删除",
        "operationId": "RolesController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "角色ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "删除成功"
          },
          "400": {
            "description": "角色正在被用户使用，无法删除"
          },
          "404": {
            "description": "角色不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "删除角色",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/code/{code}": {
      "get": {
        "description": "根据角色代码获取角色信息",
        "operationId": "RolesController_findByCode",
        "parameters": [
          {
            "name": "code",
            "required": true,
            "in": "path",
            "description": "角色代码",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "角色不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "根据代码获取角色",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/{id}/status": {
      "patch": {
        "description": "启用或禁用角色",
        "operationId": "RolesController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "角色ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRoleStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "角色不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新角色状态",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/{id}/permissions": {
      "post": {
        "description": "替换角色的所有权限，会清除原有权限并设置新权限",
        "operationId": "RolesController_assignPermissions",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "角色ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignPermissionsDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "分配成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "角色或权限不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "为角色分配权限",
        "tags": ["Roles"]
      },
      "get": {
        "description": "获取指定角色拥有的所有权限",
        "operationId": "RolesController_getRolePermissions",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "角色ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "404": {
            "description": "角色不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取角色的权限",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/statistics/overview": {
      "get": {
        "description": "获取角色总数、激活/禁用状态统计等信息",
        "operationId": "RolesController_getStatistics",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "number",
                      "description": "角色总数"
                    },
                    "active": {
                      "type": "number",
                      "description": "激活角色数"
                    },
                    "inactive": {
                      "type": "number",
                      "description": "禁用角色数"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取角色统计信息",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/batch": {
      "delete": {
        "description": "批量删除多个角色，如果有角色正在被用户使用则全部无法删除",
        "operationId": "RolesController_batchDelete",
        "parameters": [
          {
            "name": "ids",
            "required": true,
            "in": "query",
            "description": "角色ID列表",
            "schema": {
              "type": "array",
              "items": {
                "type": "number"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "批量删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deletedCount": {
                      "type": "number",
                      "description": "删除的角色数量"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "部分角色不存在或正在被用户使用"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "批量删除角色",
        "tags": ["Roles"]
      }
    },
    "/api/v1/roles/active/codes": {
      "get": {
        "description": "获取所有激活状态角色的代码列表，用于权限验证",
        "operationId": "RolesController_getAllActiveRoleCodes",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取所有激活角色的代码",
        "tags": ["Roles"]
      }
    },
    "/api/v1/permissions": {
      "post": {
        "operationId": "PermissionsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePermissionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "权限创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionResponseDto"
                }
              }
            }
          },
          "409": {
            "description": "权限名称或代码已存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "创建权限",
        "tags": ["Permissions"]
      },
      "get": {
        "operationId": "PermissionsController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PermissionResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取所有权限",
        "tags": ["Permissions"]
      }
    },
    "/api/v1/permissions/paginated": {
      "get": {
        "operationId": "PermissionsController_findAllPaginated",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码（从1开始）",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "minimum": 1,
              "default": 10,
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "keyword",
            "required": false,
            "in": "query",
            "description": "搜索关键词（匹配权限名称、代码、描述）",
            "schema": {
              "example": "user",
              "type": "string"
            }
          },
          {
            "name": "resource",
            "required": false,
            "in": "query",
            "description": "资源类型筛选",
            "schema": {
              "example": "user",
              "type": "string"
            }
          },
          {
            "name": "action",
            "required": false,
            "in": "query",
            "description": "操作动作筛选",
            "schema": {
              "example": "create",
              "type": "string"
            }
          },
          {
            "name": "isActive",
            "required": false,
            "in": "query",
            "description": "权限状态筛选",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "排序字段",
            "schema": {
              "default": "createdAt",
              "example": "createdAt",
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "name",
                "code",
                "resource",
                "action"
              ]
            }
          },
          {
            "name": "order",
            "required": false,
            "in": "query",
            "description": "排序方向",
            "schema": {
              "default": "desc",
              "example": "desc",
              "type": "string",
              "enum": ["asc", "desc"]
            }
          },
          {
            "description": "页码（从1开始）",
            "required": false,
            "name": "page",
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "description": "每页数量",
            "required": false,
            "name": "pageSize",
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 10,
              "example": 10,
              "type": "number"
            }
          },
          {
            "description": "搜索关键词（匹配权限名称、代码、描述）",
            "required": false,
            "name": "keyword",
            "in": "query",
            "schema": {
              "example": "user",
              "type": "string"
            }
          },
          {
            "description": "资源类型筛选",
            "required": false,
            "name": "resource",
            "in": "query",
            "schema": {
              "example": "user",
              "type": "string"
            }
          },
          {
            "description": "操作动作筛选",
            "required": false,
            "name": "action",
            "in": "query",
            "schema": {
              "example": "create",
              "type": "string"
            }
          },
          {
            "description": "权限状态筛选",
            "required": false,
            "name": "isActive",
            "in": "query",
            "schema": {
              "example": true,
              "type": "boolean"
            }
          },
          {
            "description": "排序字段",
            "required": false,
            "name": "sortBy",
            "in": "query",
            "schema": {
              "default": "createdAt",
              "example": "createdAt",
              "type": "string"
            }
          },
          {
            "description": "排序方向",
            "required": false,
            "name": "order",
            "in": "query",
            "schema": {
              "default": "desc",
              "example": "desc",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedPermissionsDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "分页查询权限列表",
        "tags": ["Permissions"]
      }
    },
    "/api/v1/permissions/{id}": {
      "get": {
        "operationId": "PermissionsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "权限ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "权限不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取单个权限",
        "tags": ["Permissions"]
      },
      "patch": {
        "operationId": "PermissionsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "权限ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePermissionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "权限不存在"
          },
          "409": {
            "description": "权限名称或代码已存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新权限信息",
        "tags": ["Permissions"]
      },
      "delete": {
        "operationId": "PermissionsController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "权限ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "删除成功"
          },
          "404": {
            "description": "权限不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "删除权限",
        "tags": ["Permissions"]
      }
    },
    "/api/v1/permissions/{id}/status": {
      "patch": {
        "operationId": "PermissionsController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "权限ID",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePermissionStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "状态更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PermissionResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "权限不存在"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "更新权限状态",
        "tags": ["Permissions"]
      }
    },
    "/api/v1/permissions/stats/overview": {
      "get": {
        "operationId": "PermissionsController_getStatistics",
        "parameters": [],
        "responses": {
          "200": {
            "description": "获取成功"
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取权限统计数据",
        "tags": ["Permissions"]
      }
    },
    "/api/v1/permissions/batch": {
      "delete": {
        "operationId": "PermissionsController_batchDelete",
        "parameters": [
          {
            "name": "ids",
            "required": true,
            "in": "query",
            "description": "权限ID数组，多个ID用逗号分隔",
            "schema": {
              "example": "1,2,3",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "批量删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deletedCount": {
                      "type": "number",
                      "description": "删除的权限数量"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "批量删除权限",
        "tags": ["Permissions"]
      }
    },
    "/api": {
      "get": {
        "operationId": "PublicApiController_getApiInfo",
        "parameters": [],
        "responses": {
          "200": {
            "description": "API基本信息"
          }
        },
        "summary": "API信息",
        "tags": ["Public"]
      }
    },
    "/api/v1/health": {
      "get": {
        "operationId": "HealthController_check",
        "parameters": [],
        "responses": {
          "200": {
            "description": "健康检查结果"
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": ["status"],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": ["status"],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": ["status"],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "系统健康检查",
        "tags": ["Health"]
      }
    },
    "/api/v1/health/liveness": {
      "get": {
        "operationId": "HealthController_liveness",
        "parameters": [],
        "responses": {
          "200": {
            "description": "应用存活状态"
          }
        },
        "summary": "存活性检查",
        "tags": ["Health"]
      }
    },
    "/api/v1/health/readiness": {
      "get": {
        "operationId": "HealthController_readiness",
        "parameters": [],
        "responses": {
          "200": {
            "description": "应用就绪状态"
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": ["status"],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": ["status"],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": ["status"],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "就绪性检查",
        "tags": ["Health"]
      }
    },
    "/api/v1/logs/api": {
      "get": {
        "description": "分页查询 API 请求日志，支持按方法、路径、状态码、用户ID、时间范围筛选",
        "operationId": "LogsController_findApiLogs",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "method",
            "required": false,
            "in": "query",
            "description": "HTTP 方法",
            "schema": {
              "example": "GET",
              "type": "string"
            }
          },
          {
            "name": "url",
            "required": false,
            "in": "query",
            "description": "请求路径",
            "schema": {
              "example": "/api/v1/users",
              "type": "string"
            }
          },
          {
            "name": "statusCode",
            "required": false,
            "in": "query",
            "description": "状态码",
            "schema": {
              "example": 200,
              "type": "number"
            }
          },
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "用户 ID（UUID格式）",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440000",
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "开始日期",
            "schema": {
              "example": "2025-10-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "结束日期",
            "schema": {
              "example": "2025-10-09",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功，返回 API 日志分页数据",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ApiLogPageVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权，需要登录",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "查询 API 日志",
        "tags": ["Logs"]
      }
    },
    "/api/v1/logs/api/{requestId}": {
      "get": {
        "description": "通过请求 ID 查询单条 API 日志的完整信息，包括请求参数、响应数据等",
        "operationId": "LogsController_findApiLogByRequestId",
        "parameters": [
          {
            "name": "requestId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功，返回 API 日志详情（未找到时返回 null）",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ApiLogVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败，requestId 格式不正确",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权，需要登录",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "根据 requestId 查询 API 日志详情",
        "tags": ["Logs"]
      }
    },
    "/api/v1/logs/errors": {
      "get": {
        "description": "分页查询系统错误日志，支持按错误代码、用户ID、时间范围筛选",
        "operationId": "LogsController_findErrorLogs",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "errorCode",
            "required": false,
            "in": "query",
            "description": "错误代码",
            "schema": {
              "example": "USER_NOT_FOUND",
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "用户 ID（UUID格式）",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440000",
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "开始日期",
            "schema": {
              "example": "2025-10-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "结束日期",
            "schema": {
              "example": "2025-10-09",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功，返回错误日志分页数据",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ErrorLogPageVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权，需要登录",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "查询错误日志",
        "tags": ["Logs"]
      }
    },
    "/api/v1/logs/audit": {
      "get": {
        "description": "分页查询用户操作审计日志，支持按操作类型、资源类型、用户ID、时间范围筛选",
        "operationId": "LogsController_findAuditLogs",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "action",
            "required": false,
            "in": "query",
            "description": "操作类型",
            "schema": {
              "example": "UPDATE",
              "type": "string",
              "enum": ["CREATE", "UPDATE", "DELETE"]
            }
          },
          {
            "name": "resource",
            "required": false,
            "in": "query",
            "description": "资源类型",
            "schema": {
              "example": "user",
              "type": "string"
            }
          },
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "用户 ID（UUID格式）",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440000",
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "开始日期",
            "schema": {
              "example": "2025-10-01",
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "结束日期",
            "schema": {
              "example": "2025-10-09",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功，返回审计日志分页数据",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AuditLogPageVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权，需要登录",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "查询审计日志",
        "tags": ["Logs"]
      }
    },
    "/api/v1/logs/statistics": {
      "get": {
        "description": "获取日志统计数据，包括 API 日志、错误日志、审计日志总数，以及状态码分布统计",
        "operationId": "LogsController_getStatistics",
        "parameters": [
          {
            "name": "startDate",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功，返回日志统计信息",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiSuccessResponse"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LogStatisticsVo"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败，日期格式不正确",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "未授权，需要登录",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiErrorResponse"
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT-auth": []
          }
        ],
        "summary": "获取日志统计信息",
        "tags": ["Logs"]
      }
    }
  },
  "info": {
    "title": "Enterprise NestJS Backend API",
    "description": "Enterprise NestJS Backend 接口文档",
    "version": "1.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "Health",
      "description": "健康检查"
    },
    {
      "name": "Auth",
      "description": "认证管理"
    },
    {
      "name": "Users",
      "description": "用户管理"
    },
    {
      "name": "Admin",
      "description": "管理后台"
    },
    {
      "name": "Public",
      "description": "公开接口"
    },
    {
      "name": "Permissions",
      "description": "权限管理"
    },
    {
      "name": "Logs",
      "description": "日志管理"
    },
    {
      "name": "Roles",
      "description": "角色管理"
    }
  ],
  "servers": [],
  "components": {
    "securitySchemes": {
      "JWT-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "JWT",
        "description": "Enter JWT token",
        "in": "header"
      }
    },
    "schemas": {
      "ApiErrorResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "错误码",
            "example": "S10000"
          },
          "message": {
            "type": "string",
            "description": "错误消息",
            "example": "系统内部错误"
          },
          "data": {
            "type": "object",
            "description": "错误数据（如验证错误详情等）"
          },
          "requestId": {
            "type": "string",
            "description": "请求 ID，用于日志追踪",
            "example": "uuid-string"
          },
          "timestamp": {
            "type": "string",
            "description": "错误发生的时间戳",
            "example": "2025-11-04T10:00:00+08:00"
          },
          "path": {
            "type": "string",
            "description": "请求路径",
            "example": "/api/v1/users"
          },
          "method": {
            "type": "string",
            "description": "请求方法",
            "example": "POST",
            "enum": ["GET", "POST", "PATCH", "PUT", "DELETE", "HEAD", "OPTIONS"]
          },
          "timezone": {
            "type": "string",
            "description": "时区",
            "example": "Asia/Shanghai"
          }
        },
        "required": [
          "code",
          "message",
          "requestId",
          "timestamp",
          "path",
          "method"
        ]
      },
      "ApiSuccessResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "响应码，成功时为 200",
            "example": "200"
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "success"
          },
          "data": {
            "type": "object",
            "description": "响应数据"
          },
          "requestId": {
            "type": "string",
            "description": "请求 ID，用于日志追踪",
            "example": "uuid-string"
          },
          "timestamp": {
            "type": "string",
            "description": "响应时间戳（使用指定的时区）",
            "example": "2025-11-04T10:00:00+08:00"
          },
          "timezone": {
            "type": "string",
            "description": "时区（告诉客户端响应中日期字段使用的时区）",
            "example": "Asia/Shanghai"
          }
        },
        "required": [
          "code",
          "message",
          "data",
          "requestId",
          "timestamp",
          "timezone"
        ]
      },
      "RegisterResponseVo": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "johndoe"
          },
          "email": {
            "type": "string",
            "description": "邮箱地址",
            "example": "user@example.com"
          },
          "message": {
            "type": "string",
            "description": "提示信息",
            "example": "注册成功，请登录"
          }
        },
        "required": ["username", "email", "message"]
      },
      "RegisterDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "邮箱地址",
            "example": "user@example.com"
          },
          "username": {
            "type": "string",
            "description": "用户名（3-20个字符，只能包含字母、数字、下划线）",
            "example": "johndoe",
            "minLength": 3,
            "maxLength": 20
          },
          "password": {
            "type": "string",
            "description": "密码（8-32个字符，必须包含大小写字母和数字）",
            "example": "Password123",
            "minLength": 8,
            "maxLength": 32
          },
          "firstName": {
            "type": "string",
            "description": "名",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "姓",
            "example": "Doe"
          },
          "phone": {
            "type": "string",
            "description": "手机号码",
            "example": "13800138000"
          }
        },
        "required": ["email", "username", "password"]
      },
      "AuthResponseVo": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "Access Token（访问令牌）",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "Refresh Token（刷新令牌）",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "tokenType": {
            "type": "string",
            "description": "Token 类型",
            "example": "Bearer"
          },
          "expiresIn": {
            "type": "number",
            "description": "Access Token 过期时间（秒）",
            "example": 900
          },
          "user": {
            "type": "object",
            "description": "用户信息（不包含敏感ID）"
          }
        },
        "required": [
          "accessToken",
          "refreshToken",
          "tokenType",
          "expiresIn",
          "user"
        ]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "用户名或邮箱",
            "example": "admin@enterprise.local"
          },
          "password": {
            "type": "string",
            "description": "密码",
            "example": "admin123456"
          }
        },
        "required": ["username", "password"]
      },
      "RefreshTokenDto": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Refresh Token",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": ["refreshToken"]
      },
      "AuthMeResponseVo": {
        "type": "object",
        "properties": {
          "username": {
            "type": "object",
            "description": "用户名",
            "example": "JohnDoe"
          },
          "email": {
            "type": "object",
            "description": "邮箱地址",
            "example": "example@example.com"
          },
          "roles": {
            "type": "object",
            "description": "用户角色列表",
            "example": ["admin", "user"]
          },
          "permissions": {
            "type": "object",
            "description": "用户权限列表",
            "example": ["read:articles", "write:articles"]
          }
        },
        "required": ["username", "email", "roles", "permissions"]
      },
      "UserResponseDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "邮箱地址",
            "example": "user@example.com"
          },
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "johndoe"
          },
          "firstName": {
            "type": "string",
            "description": "名",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "姓",
            "example": "Doe"
          },
          "avatar": {
            "type": "string",
            "description": "头像 URL",
            "example": "https://example.com/avatar.jpg"
          },
          "phone": {
            "type": "string",
            "description": "手机号码",
            "example": "13800138000"
          },
          "isActive": {
            "type": "boolean",
            "description": "账户是否激活",
            "example": true
          },
          "isVerified": {
            "type": "boolean",
            "description": "账户是否已验证",
            "example": true
          },
          "lastLoginAt": {
            "format": "date-time",
            "type": "string",
            "description": "最后登录时间",
            "example": "2025-10-09T10:00:00.000Z"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2025-10-09T10:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2025-10-09T10:00:00.000Z"
          },
          "roles": {
            "description": "用户角色列表",
            "example": ["admin", "user"],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "email",
          "username",
          "isActive",
          "isVerified",
          "createdAt",
          "updatedAt"
        ]
      },
      "PaginationMetaDto": {
        "type": "object",
        "properties": {
          "page": {
            "type": "number",
            "description": "当前页码",
            "example": 1
          },
          "pageSize": {
            "type": "number",
            "description": "每页数量",
            "example": 10
          },
          "total": {
            "type": "number",
            "description": "总记录数",
            "example": 100
          },
          "totalPages": {
            "type": "number",
            "description": "总页数",
            "example": 10
          },
          "hasPreviousPage": {
            "type": "boolean",
            "description": "是否有上一页",
            "example": false
          },
          "hasNextPage": {
            "type": "boolean",
            "description": "是否有下一页",
            "example": true
          }
        },
        "required": [
          "page",
          "pageSize",
          "total",
          "totalPages",
          "hasPreviousPage",
          "hasNextPage"
        ]
      },
      "PaginatedUsersDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "用户列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserResponseDto"
            }
          },
          "meta": {
            "description": "分页元数据",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": ["data", "meta"]
      },
      "UserStatisticsDto": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number",
            "description": "用户总数",
            "example": 1000
          },
          "active": {
            "type": "number",
            "description": "活跃用户数",
            "example": 850
          },
          "inactive": {
            "type": "number",
            "description": "禁用用户数",
            "example": 150
          },
          "verified": {
            "type": "number",
            "description": "已验证邮箱用户数",
            "example": 900
          },
          "unverified": {
            "type": "number",
            "description": "未验证邮箱用户数",
            "example": 100
          },
          "newToday": {
            "type": "number",
            "description": "今日新增用户数",
            "example": 15
          },
          "newThisWeek": {
            "type": "number",
            "description": "本周新增用户数",
            "example": 50
          },
          "newThisMonth": {
            "type": "number",
            "description": "本月新增用户数",
            "example": 200
          }
        },
        "required": [
          "total",
          "active",
          "inactive",
          "verified",
          "unverified",
          "newToday",
          "newThisWeek",
          "newThisMonth"
        ]
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "邮箱地址",
            "example": "user@example.com"
          },
          "username": {
            "type": "string",
            "description": "用户名（3-20个字符，只能包含字母、数字、下划线）",
            "example": "johndoe",
            "minLength": 3,
            "maxLength": 20
          },
          "firstName": {
            "type": "string",
            "description": "名",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "姓",
            "example": "Doe"
          },
          "avatar": {
            "type": "string",
            "description": "头像 URL",
            "example": "https://example.com/avatar.jpg"
          },
          "phone": {
            "type": "string",
            "description": "手机号码",
            "example": "13800138000"
          },
          "isActive": {
            "type": "boolean",
            "description": "账户是否激活",
            "example": true
          }
        }
      },
      "UpdateUserStatusDto": {
        "type": "object",
        "properties": {
          "isActive": {
            "type": "boolean",
            "description": "用户是否激活（true:激活, false:禁用）",
            "example": true
          }
        },
        "required": ["isActive"]
      },
      "ResetPasswordDto": {
        "type": "object",
        "properties": {
          "newPassword": {
            "type": "string",
            "description": "新密码（至少8位，包含大小写字母、数字和特殊字符）",
            "example": "NewPassword123!",
            "minLength": 8
          }
        },
        "required": ["newPassword"]
      },
      "AssignRolesDto": {
        "type": "object",
        "properties": {
          "roleIds": {
            "description": "角色ID数组（至少包含一个角色ID，不能重复）",
            "example": [1, 2],
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": ["roleIds"]
      },
      "BatchOperationDto": {
        "type": "object",
        "properties": {
          "ids": {
            "description": "用户ID数组（UUID格式，至少包含一个ID，不能重复）",
            "example": [
              "550e8400-e29b-41d4-a716-446655440000",
              "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["ids"]
      },
      "UpdateProfileDto": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "用户名（3-20个字符，只能包含字母、数字、下划线）",
            "example": "johndoe",
            "minLength": 3,
            "maxLength": 20
          },
          "firstName": {
            "type": "string",
            "description": "名",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "姓",
            "example": "Doe"
          },
          "phone": {
            "type": "string",
            "description": "手机号（可选，必须是有效的手机号格式）",
            "example": "13800138000"
          },
          "avatar": {
            "type": "string",
            "description": "头像URL",
            "example": "https://example.com/avatar.jpg"
          }
        }
      },
      "ChangePasswordDto": {
        "type": "object",
        "properties": {
          "oldPassword": {
            "type": "string",
            "description": "当前密码",
            "example": "OldPassword123!"
          },
          "newPassword": {
            "type": "string",
            "description": "新密码（至少8位，包含大小写字母、数字和特殊字符）",
            "example": "NewPassword123!",
            "minLength": 8
          },
          "confirmPassword": {
            "type": "string",
            "description": "确认新密码（必须与新密码一致）",
            "example": "NewPassword123!"
          }
        },
        "required": ["oldPassword", "newPassword", "confirmPassword"]
      },
      "UserSessionDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "会话ID",
            "example": "session_123456"
          },
          "device": {
            "type": "string",
            "description": "设备信息（User Agent）",
            "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/120.0.0.0"
          },
          "ipAddress": {
            "type": "string",
            "description": "登录IP地址",
            "example": "192.168.1.100"
          },
          "loginAt": {
            "format": "date-time",
            "type": "string",
            "description": "登录时间",
            "example": "2025-10-10T10:30:00.000Z"
          },
          "lastActivity": {
            "format": "date-time",
            "type": "string",
            "description": "最后活跃时间",
            "example": "2025-10-10T12:45:00.000Z"
          },
          "isCurrent": {
            "type": "boolean",
            "description": "是否为当前会话",
            "example": true
          }
        },
        "required": [
          "sessionId",
          "device",
          "ipAddress",
          "loginAt",
          "lastActivity",
          "isCurrent"
        ]
      },
      "CreateRoleDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "角色名称（唯一，用于显示）",
            "example": "系统管理员"
          },
          "code": {
            "type": "string",
            "description": "角色代码（唯一，用于程序识别，如\"ADMIN\"）",
            "example": "ADMIN"
          },
          "description": {
            "type": "string",
            "description": "角色描述（详细说明角色的职责和权限范围）",
            "example": "拥有系统最高权限，可以管理所有功能"
          }
        },
        "required": ["name", "code"]
      },
      "RoleResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "角色ID",
            "example": 1
          },
          "name": {
            "type": "string",
            "description": "角色名称",
            "example": "系统管理员"
          },
          "code": {
            "type": "string",
            "description": "角色代码",
            "example": "ADMIN"
          },
          "description": {
            "type": "string",
            "description": "角色描述",
            "example": "拥有系统最高权限，可以管理所有功能"
          },
          "isActive": {
            "type": "boolean",
            "description": "角色状态",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2025-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2025-01-01T00:00:00.000Z"
          },
          "permissions": {
            "description": "关联的权限列表",
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        },
        "required": ["id", "name", "code", "isActive", "createdAt", "updatedAt"]
      },
      "PaginatedRolesDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "角色数据列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RoleResponseDto"
            }
          },
          "meta": {
            "type": "object",
            "description": "分页信息",
            "properties": {
              "page": {
                "description": "当前页码",
                "example": 1,
                "type": "number"
              },
              "pageSize": {
                "description": "每页数量",
                "example": 10,
                "type": "number"
              },
              "total": {
                "description": "总记录数",
                "example": 100,
                "type": "number"
              },
              "totalPages": {
                "description": "总页数",
                "example": 10,
                "type": "number"
              },
              "hasNext": {
                "description": "是否有下一页",
                "example": true,
                "type": "boolean"
              },
              "hasPrev": {
                "description": "是否有上一页",
                "example": false,
                "type": "boolean"
              }
            }
          }
        },
        "required": ["data", "meta"]
      },
      "UpdateRoleDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "角色名称（唯一，用于显示）",
            "example": "超级管理员"
          },
          "code": {
            "type": "string",
            "description": "角色代码（唯一，用于程序识别，如\"SUPER_ADMIN\"）",
            "example": "SUPER_ADMIN"
          },
          "description": {
            "type": "string",
            "description": "角色描述（详细说明角色的职责和权限范围）",
            "example": "拥有系统最高权限，可以管理所有功能和用户"
          }
        }
      },
      "UpdateRoleStatusDto": {
        "type": "object",
        "properties": {
          "isActive": {
            "type": "boolean",
            "description": "角色状态（true表示启用，false表示禁用）",
            "example": true
          }
        },
        "required": ["isActive"]
      },
      "AssignPermissionsDto": {
        "type": "object",
        "properties": {
          "permissionIds": {
            "description": "权限ID列表",
            "example": [1, 2, 3],
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": ["permissionIds"]
      },
      "CreatePermissionDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "权限名称（唯一，用于显示）",
            "example": "创建用户"
          },
          "code": {
            "type": "string",
            "description": "权限代码（唯一，用于程序识别，如\"user:create\"）",
            "example": "user:create"
          },
          "resource": {
            "type": "string",
            "description": "资源类型（权限所属的资源，如\"user\"、\"role\"）",
            "example": "user"
          },
          "action": {
            "type": "string",
            "description": "操作动作（对资源的操作类型，如\"create\"、\"read\"、\"update\"、\"delete\"）",
            "example": "create"
          },
          "description": {
            "type": "string",
            "description": "权限描述（详细说明权限的作用范围）",
            "example": "允许创建新用户账户"
          }
        },
        "required": ["name", "code", "resource", "action"]
      },
      "PermissionResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "权限ID",
            "example": 1
          },
          "name": {
            "type": "string",
            "description": "权限名称",
            "example": "创建用户"
          },
          "code": {
            "type": "string",
            "description": "权限代码",
            "example": "user:create"
          },
          "resource": {
            "type": "string",
            "description": "资源类型",
            "example": "user"
          },
          "action": {
            "type": "string",
            "description": "操作动作",
            "example": "create"
          },
          "description": {
            "type": "string",
            "description": "权限描述",
            "example": "允许创建新用户账户"
          },
          "isActive": {
            "type": "boolean",
            "description": "权限状态",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2025-10-09T10:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2025-10-09T10:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "code",
          "resource",
          "action",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "PaginatedPermissionsDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "权限列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PermissionResponseDto"
            }
          },
          "meta": {
            "description": "分页元数据",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": ["data", "meta"]
      },
      "UpdatePermissionDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "权限名称（唯一，用于显示）",
            "example": "创建用户"
          },
          "code": {
            "type": "string",
            "description": "权限代码（唯一，用于程序识别，如\"user:create\"）",
            "example": "user:create"
          },
          "resource": {
            "type": "string",
            "description": "资源类型（权限所属的资源，如\"user\"、\"role\"）",
            "example": "user"
          },
          "action": {
            "type": "string",
            "description": "操作动作（对资源的操作类型，如\"create\"、\"read\"、\"update\"、\"delete\"）",
            "example": "create"
          },
          "description": {
            "type": "string",
            "description": "权限描述（详细说明权限的作用范围）",
            "example": "允许创建新用户账户"
          }
        }
      },
      "UpdatePermissionStatusDto": {
        "type": "object",
        "properties": {
          "isActive": {
            "type": "boolean",
            "description": "权限状态（true表示启用，false表示禁用）",
            "example": true
          }
        },
        "required": ["isActive"]
      },
      "ApiLogUserVo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "用户 ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "johndoe"
          },
          "email": {
            "type": "string",
            "description": "邮箱",
            "example": "user@example.com"
          }
        },
        "required": ["id", "username", "email"]
      },
      "ApiLogVo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "日志 ID（UUID格式）",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "requestId": {
            "type": "string",
            "description": "请求 ID（唯一标识）",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "userId": {
            "type": "string",
            "description": "用户 ID",
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "nullable": true
          },
          "method": {
            "type": "string",
            "description": "HTTP 方法",
            "example": "GET"
          },
          "url": {
            "type": "string",
            "description": "请求路径",
            "example": "/api/v1/users"
          },
          "params": {
            "type": "object",
            "description": "请求参数",
            "example": {
              "page": 1,
              "pageSize": 20
            },
            "nullable": true
          },
          "body": {
            "type": "object",
            "description": "请求体",
            "example": {
              "username": "johndoe"
            },
            "nullable": true
          },
          "response": {
            "type": "object",
            "description": "响应数据",
            "example": {
              "success": true,
              "data": []
            },
            "nullable": true
          },
          "statusCode": {
            "type": "number",
            "description": "HTTP 状态码",
            "example": 200
          },
          "duration": {
            "type": "number",
            "description": "请求耗时（毫秒）",
            "example": 125
          },
          "ip": {
            "type": "string",
            "description": "客户端 IP",
            "example": "192.168.1.100"
          },
          "userAgent": {
            "type": "string",
            "description": "User Agent",
            "example": "Mozilla/5.0...",
            "nullable": true
          },
          "error": {
            "type": "string",
            "description": "错误信息",
            "example": null,
            "nullable": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2025-11-15T08:00:00.000Z"
          },
          "user": {
            "description": "用户信息",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/ApiLogUserVo"
              }
            ]
          }
        },
        "required": [
          "id",
          "requestId",
          "method",
          "url",
          "statusCode",
          "duration",
          "ip",
          "createdAt"
        ]
      },
      "ApiLogPageVo": {
        "type": "object",
        "properties": {
          "meta": {
            "description": "分页元数据",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          },
          "data": {
            "description": "API 日志列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ApiLogVo"
            }
          }
        },
        "required": ["meta", "data"]
      },
      "ErrorLogVo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "日志 ID（UUID格式）",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "requestId": {
            "type": "string",
            "description": "请求 ID（关联 API 日志）",
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "nullable": true
          },
          "userId": {
            "type": "string",
            "description": "用户 ID",
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "nullable": true
          },
          "errorCode": {
            "type": "string",
            "description": "错误代码",
            "example": "USER_NOT_FOUND"
          },
          "message": {
            "type": "string",
            "description": "错误消息",
            "example": "用户不存在"
          },
          "stack": {
            "type": "string",
            "description": "错误堆栈",
            "example": "Error: User not found\n    at UserService.findOne...",
            "nullable": true
          },
          "context": {
            "type": "object",
            "description": "错误上下文（额外信息）",
            "example": {
              "userId": "123",
              "operation": "findUser"
            },
            "nullable": true
          },
          "ip": {
            "type": "string",
            "description": "客户端 IP",
            "example": "192.168.1.100",
            "nullable": true
          },
          "userAgent": {
            "type": "string",
            "description": "User Agent",
            "example": "Mozilla/5.0...",
            "nullable": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2025-11-15T08:00:00.000Z"
          }
        },
        "required": ["id", "errorCode", "message", "createdAt"]
      },
      "ErrorLogPageVo": {
        "type": "object",
        "properties": {
          "meta": {
            "description": "分页元数据",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          },
          "data": {
            "description": "错误日志列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ErrorLogVo"
            }
          }
        },
        "required": ["meta", "data"]
      },
      "AuditLogVo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "日志 ID（UUID格式）",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "userId": {
            "type": "string",
            "description": "用户 ID",
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "nullable": true
          },
          "action": {
            "type": "string",
            "description": "操作类型",
            "example": "UPDATE",
            "enum": ["CREATE", "UPDATE", "DELETE"]
          },
          "resource": {
            "type": "string",
            "description": "资源类型",
            "example": "user"
          },
          "resourceId": {
            "type": "string",
            "description": "资源 ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "oldData": {
            "type": "object",
            "description": "修改前的数据",
            "example": {
              "username": "oldname",
              "email": "old@example.com"
            },
            "nullable": true
          },
          "newData": {
            "type": "object",
            "description": "修改后的数据",
            "example": {
              "username": "newname",
              "email": "new@example.com"
            },
            "nullable": true
          },
          "ip": {
            "type": "string",
            "description": "客户端 IP",
            "example": "192.168.1.100",
            "nullable": true
          },
          "userAgent": {
            "type": "string",
            "description": "User Agent",
            "example": "Mozilla/5.0...",
            "nullable": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2025-11-15T08:00:00.000Z"
          }
        },
        "required": ["id", "action", "resource", "resourceId", "createdAt"]
      },
      "AuditLogPageVo": {
        "type": "object",
        "properties": {
          "meta": {
            "description": "分页元数据",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          },
          "data": {
            "description": "审计日志列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditLogVo"
            }
          }
        },
        "required": ["meta", "data"]
      },
      "StatusCodeStatVo": {
        "type": "object",
        "properties": {
          "statusCode": {
            "type": "number",
            "description": "HTTP 状态码",
            "example": 200
          },
          "count": {
            "type": "number",
            "description": "出现次数",
            "example": 1523
          }
        },
        "required": ["statusCode", "count"]
      },
      "LogStatisticsVo": {
        "type": "object",
        "properties": {
          "totalApiLogs": {
            "type": "number",
            "description": "API 日志总数",
            "example": 5000
          },
          "totalErrorLogs": {
            "type": "number",
            "description": "错误日志总数",
            "example": 150
          },
          "totalAuditLogs": {
            "type": "number",
            "description": "审计日志总数",
            "example": 800
          },
          "statusCodeStats": {
            "description": "状态码统计",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StatusCodeStatVo"
            }
          }
        },
        "required": [
          "totalApiLogs",
          "totalErrorLogs",
          "totalAuditLogs",
          "statusCodeStats"
        ]
      }
    }
  }
}
